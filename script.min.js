document.addEventListener('DOMContentLoaded', function() {
    // Initialize all components
    initNavigation();
    initContactEffects();
    initPopupForm();
    initAnimations();
    initSocialIcons();
});

function initNavigation() {
    const navLinks = document.querySelectorAll('.nav-link');
    
    // Animate navigation links
    navLinks.forEach((link, index) => {
        setTimeout(() => {
            link.style.opacity = '1';
            link.style.transform = 'translateY(0)';
        }, index * 100);
    });
}

function initContactEffects() {
    const contactBoxes = document.querySelectorAll('.contact-info, .quick-links, .newsletter');
    
    contactBoxes.forEach(box => {
        box.addEventListener('mousemove', (e) => {
            const xAxis = (window.innerWidth / 2 - e.pageX) / 15;
            const yAxis = (window.innerHeight / 2 - e.pageY) / 15;
            box.style.transform = `rotateY(${xAxis}deg) rotateX(${yAxis}deg)`;
        });
        
        box.addEventListener('mouseenter', () => {
            box.style.transition = 'all 0.1s ease';
        });
        
        box.addEventListener('mouseleave', () => {
            box.style.transition = 'all 0.5s ease';
            box.style.transform = 'rotateY(0deg) rotateX(0deg)';
        });
    });
}

function initSocialIcons() {
    const socialIcons = document.querySelectorAll('.social-icon');
    
    setInterval(() => {
        socialIcons.forEach(icon => {
            if(Math.random() > 0.7) {
                icon.style.transform = 'scale(1.2)';
                setTimeout(() => {
                    icon.style.transform = 'scale(1)';
                }, 300);
            }
        });
    }, 2000);
}

function initPopupForm() {
    const popupOverlay = document.getElementById('popupOverlay');
    const popupCloseBtn = document.getElementById('popupCloseBtn');
    const popupForm = document.getElementById('popupForm');
    const popupTrigger = document.querySelector('.popup-trigger-btn');
    
    if (!popupOverlay) return;
    
    // Show popup when page loads after delay
    setTimeout(() => {
        popupOverlay.classList.add('active');
    }, 1000);
    
    // Close popup when close button is clicked
    popupCloseBtn.addEventListener('click', function() {
        popupOverlay.classList.remove('active');
    });
    
    // Close popup when clicking outside the form
    popupOverlay.addEventListener('click', function(e) {
        if (e.target === popupOverlay) {
            popupOverlay.classList.remove('active');
        }
    });
    
    // Form submission
    popupForm.addEventListener('submit', function(e) {
        e.preventDefault();
        alert('Thank you for your submission! We will contact you soon.');
        popupOverlay.classList.remove('active');
        popupForm.reset();
    });
    
    // Trigger popup with button
    if (popupTrigger) {
        popupTrigger.addEventListener('click', function() {
            popupOverlay.classList.add('active');
        });
    }
}

function initAnimations() {
    // Background animation
    let angle = 0;
    const headerDesign = document.querySelector('.header-design');
    const contactDesign = document.querySelector('.contact-design');
    
    if (!headerDesign || !contactDesign) return;
    
    setInterval(() => {
        angle += 0.5;
        const x = Math.sin(angle * Math.PI / 180) * 10;
        const y = Math.cos(angle * Math.PI / 180) * 10;
        
        headerDesign.style.backgroundPosition = `${x}px ${y}px`;
        contactDesign.style.backgroundPosition = `${-x}px ${-y}px`;
    }, 50);
}